using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Exploitation : MonoBehaviour
{
    [SerializeField] private GameObject slot;
    private TuileManager tuileExploitee;
    private float profondeur = -4;

    // Start is called before the first frame update
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        
    }

    public TuileManager TuileExploitee
    {
        set
        {
            tuileExploitee = value;
            Vector3 position = tuileExploitee.transform.position;
            position.z = profondeur;
            transform.position = position;
            Invoke("GenererSlots",0.1f);
        }
    }

    private void GenererSlots()
    {
        int nbrSlots = tuileExploitee.productionTuile.prod.slots;
        float largeurSlot = slot.GetComponent<SpriteRenderer>().bounds.size.x;
        float espaceSepration = 0.025f;
        Vector3 decalage = new Vector3((-largeurSlot*2*(nbrSlots-1)) - (espaceSepration * (nbrSlots-1)),0.1f,0);
        for (int i = 0; i < nbrSlots; i++)
        {
            GameObject nvSlot = Instantiate(slot, transform);

            decalage.x += (largeurSlot + espaceSepration);
            nvSlot.transform.position += decalage;
            decalage.x += espaceSepration;
        }
    }

}
